[custom]
enable_rule_generator=true
overwrite_original_rules=true

; === FORCE DIRECT to ikcosales.ir and Iran ===
ruleset=ğŸ¯ DIRECT,ikcosales.ir
ruleset=ğŸ¯ DIRECT,DOMAIN-SUFFIX,ikcosales.ir
ruleset=ğŸ¯ DIRECT,geoip:ir
ruleset=ğŸ¯ DIRECT,geosite:category-ir
ruleset=ğŸ¯ DIRECT,geosite:category-bank-ir
ruleset=ğŸ¯ DIRECT,geosite:category-bourse-ir
ruleset=ğŸ¯ DIRECT,geosite:category-education-ir
ruleset=ğŸ¯ DIRECT,geosite:category-forums-ir
ruleset=ğŸ¯ DIRECT,geosite:category-gov-ir
ruleset=ğŸ¯ DIRECT,geosite:category-insurance-ir
ruleset=ğŸ¯ DIRECT,geosite:category-media-ir
ruleset=ğŸ¯ DIRECT,geosite:category-news-ir
ruleset=ğŸ¯ DIRECT,geosite:category-payment-ir
ruleset=ğŸ¯ DIRECT,geosite:category-scholar-ir
ruleset=ğŸ¯ DIRECT,geosite:category-shopping-ir
ruleset=ğŸ¯ DIRECT,geosite:category-social-media-ir
ruleset=ğŸ¯ DIRECT,geosite:category-tech-ir
ruleset=ğŸ¯ DIRECT,geosite:category-travel-ir

; === BLOCK ads
ruleset=ğŸ›‘ AdBlock,geosite:category-ads-all
ruleset=ğŸ›‘ AdBlock,geosite:category-ads-ir
ruleset=ğŸ›‘ AdBlock,geosite:google-ads
ruleset=ğŸ›‘ AdBlock,geosite:spotify-ads
ruleset=ğŸ›‘ AdBlock,geosite:adobe-ads
ruleset=ğŸ›‘ AdBlock,geosite:apple-ads

; === Final fallback for everything else
ruleset=ğŸŸ Final Catch-All,[]FINAL

; === Proxy Groups ===

; Iran-related direct access
custom_proxy_group=ğŸ¯ DIRECT`select`[]DIRECT

; Ad blocking goes to REJECT or DIRECT fallback
custom_proxy_group=ğŸ›‘ AdBlock`select`[]REJECT`[]DIRECT

; Final fallback chooses best proxy
custom_proxy_group=ğŸŸ Final Catch-All`select`[]ğŸš€ Proxy`[]DIRECT

; Proxy with Auto Speed Test (YouTube)
custom_proxy_group=ğŸš€ Proxy`url-test`.*`https://www.youtube.com/`300,,50
